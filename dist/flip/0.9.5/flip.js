define("#flip/0.9.5/flip",["#widget/0.9.16/widget-mobile","#base/0.9.16/base","#class/0.9.2/class","#events/0.9.1/events","#base/0.9.16/aspect","#base/0.9.16/attribute","#zepto/1.0.0/zepto","#widget/0.9.16/daparser-mobile","#widget/0.9.16/auto-render-mobile"],function(e,t,n){var r=e("#widget/0.9.16/widget-mobile"),s=e("#zepto/1.0.0/zepto"),o;n.exports=o=r.extend({attrs:{element:null,direction:"ltr",frontNode:null,backNode:null,containerCSS:{"-webkit-perspective":"1000","-webkit-perspective-origin":"50% 50%",readonly:!0},flipCSS:{"-webkit-transform-style":"preserve-3d","-webkit-transition":"-webkit-transform 0.8s ease",position:"relative",readonly:!0},faceCSS:{position:"absolute",left:0,top:0,display:"block",readonly:!0},triggers:[]},parseElement:function(){o.superclass.parseElement.call(this),this.set("frontNode",this.element.find("*[data-flip-role=frontFace]")||null),this.set("backNode",this.element.find("*[data-flip-role=backFace]")||null);var e=this.element.find("*[data-flip-role=trigger]");for(i=0;i<e.length;i++){var t=this.get("triggers");t.push(e[i]),this.set("triggers",t)}this._wrapFlip()},setup:function(){this._initCSS()},delegateEvents:function(){o.superclass.delegateEvents.call(this);var e,t,n=this;for(e in this.get("triggers")){t=s(this.get("triggers")[e]).data("flipAction")||"flipBack";switch(t){case"flipFront":s(this.get("triggers")[e]).bind("click.flip",function(e){e.preventDefault(),n.flip("front")});break;case"flipBack":default:s(this.get("triggers")[e]).bind("click.flip",function(e){e.preventDefault(),n.flip("back")})}}},flip:function(e){if(this._animating||!this.element||e==this.face)return;this.face=e||"back",this._startFlip()},_startFlip:function(){var e=this;switch(this.get("direction")){case"ltr":switch(this.face){case"front":this._startCSS={"-webkit-transform":"rotateY(180deg)"},this._endCSS={"-webkit-transform":"rotateY(0deg)"};break;case"back":default:this._startCSS={"-webkit-transform":"rotateY(0deg)"},this._endCSS={"-webkit-transform":"rotateY(180deg)"}}break;default:switch(this.face){case"front":this._startCSS={"-webkit-transform":"rotateY(180deg)"},this._endCSS={"-webkit-transform":"rotateY(0deg)"};break;case"back":default:this._startCSS={"-webkit-transform":"rotateY(0deg)"},this._endCSS={"-webkit-transform":"rotateY(180deg)"}}}s(this.viewport).css(this._startCSS),this._animating=!0,this.trigger("transitionStart",this),s(this.viewport).bind("webkitTransitionEnd",function(){e._end()}),s(this.viewport).css(this._endCSS)},_end:function(){this.trigger("transitionEnd",this),this._removeEvent(),this._animating=!1},_wrapFlip:function(){var e=s(this.srcNode),t=s('<div data-flip-role="viewport"></div>');s(this.get("frontNode")).wrapAll(t),s(this.get("backNode")).wrapAll(t),this.viewport=s(t,e)},_initCSS:function(){this.element.css(this.get("containerCSS")),s(this.viewport).css(this.get("flipCSS")),s(this.get("frontNode")).css(this.get("faceCSS")),s(this.get("backNode")).css(this.get("faceCSS")),this.get("frontNode")&&s(this.get("frontNode")).css({"-webkit-transform":"rotateY(0deg)","-webkit-backface-visibility":"hidden"}),this.get("backNode")&&s(this.get("backNode")).css({"-webkit-transform":"rotateY(180deg)","-webkit-backface-visibility":"hidden"})},_removeEvent:function(){s(this.viewport).unbind("webkitTransitionEnd")}})});