define("#confirm/0.9.0/confirm",["overlay","$"],function(a,b,c){var d=a("overlay"),e=a("$"),f=d.extend({attrs:{message:null,styles:{position:"absolute",top:0,left:0,margin:0}},initialize:function(a){f.superclass.initialize.call(this,a),this.mask=null,this.get("element")&&(this.mask=e("<div></div>"))},sync:function(){if(!this.get("element"))return;this.get("element").css({opacity:0});var a=document.documentElement,b=a.clientWidth,c=a.clientHeight,d=parseInt(this.get("element").get(0).clientWidth,10),f=parseInt(this.get("element").get(0).clientHeight,10),g=window.scrollY,h=a.offsetHeight;if(e.os.ios){var i=a.scrollHeight-c;i>=1&&i<60&&(g+=i)}return this.get("element").css({left:(b-d)/2,top:(c-f)/2+g,opacity:1}),h<c?h=c:h=h,this.mask.css({width:a.offsetWidth,height:h}),this.syncShim(),this},bindUI:function(){f.superclass.bindUI.call(this);var a=this.get("element").find('*[data-confirm-role="trigger"]');return a.click(e.proxy(function(a){a.preventDefault();switch(e(a.currentTarget).attr("data-confirm-action")){case"confirm":this.confirm()}},this)),this},render:function(){return this.get("element")&&!e(this.get("element")).parent().get(0)&&this.set("element",e(this.get("element")).hide()),this.get("element")&&(this.mask.appendTo("body"),f.superclass.render.call(this)),this},destroy:function(){this.mask&&this.mask.remove(),f.superclass.destroy.call(this),this.mask=null},show:function(){if(!this.get("element")){var a=window.confirm(this.get("message"));switch(a){case!0:this.confirm();break;case!1:this.hide()}}else{this.get("element").css({display:"block"}),this.mask.css("display","block"),this.sync();var b=this.get("element");this.set("element",this.mask),this.addShim(),this.set("element",b),this.trigger("shown",this)}return this},hide:function(){return this.mask&&this.mask.hide(),f.superclass.hide.call(this),this},confirm:function(){return this.trigger("confirm",this),this},setStyles:function(a){return f.superclass.setStyles.call(this,a),this.mask.css({position:"absolute",top:0,left:0,zIndex:this.get("styles").zIndex,background:"rgba(0,0,0,.5)",display:"none",margin:0}),this},syncShim:function(){e(this.shim).css({width:this.mask.offset().width,height:this.mask.offset().height,left:this.mask.offset().left,top:this.mask.offset().top})}});c.exports=f});