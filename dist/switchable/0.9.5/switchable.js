define("#switchable/0.9.5/switchable",["#zepto/0.9.0/zepto","#widget/0.9.16/widget-mobile","#base/0.9.16/base","#class/0.9.2/class","#events/0.9.1/events","#base/0.9.16/aspect","#base/0.9.16/attribute","#widget/0.9.16/daparser-mobile","#widget/0.9.16/auto-render-mobile","#switchable/0.9.5/const","#switchable/0.9.5/plugins/effects","#switchable/0.9.5/plugins/autoplay","#switchable/0.9.5/plugins/circular","#switchable/0.9.5/plugins/multiple"],function(e,t,n){function c(e,t){var n=r("<ul>");for(var i=0;i<e;i++){var o=i===t?s.ACTIVE_CLASS:"";r("<li>").html(i+1).addClass(o).appendTo(n)}return n}var r=e("#zepto/0.9.0/zepto"),i=e("#widget/0.9.16/widget-mobile"),s=e("#switchable/0.9.5/const"),o=e("#switchable/0.9.5/plugins/effects"),u=e("#switchable/0.9.5/plugins/autoplay"),a=e("#switchable/0.9.5/plugins/circular"),f=e("#switchable/0.9.5/plugins/multiple"),l=i.extend({attrs:{triggers:{value:[],getter:function(e){return r(e)}},panels:{value:[],getter:function(e){return r(e)}},hasTriggers:!0,triggerType:"click",delay:100,effect:"none",easing:"linear",duration:500,activeIndex:{value:0,getter:function(e){return e*1},setter:function(e){return e*1}},step:1,length:{readOnly:!0,getter:function(){return this.panels.length/this.get("step")}},viewSize:[]},setup:function(){this._parseRole(),this._initElement(),this._initPanels(),this._initTriggers(),this._initPlugins(),this.render()},_parseRole:function(){var e=this.dataset.role;if(!e)return;var t=this.element,n=this.get("triggers"),r=this.get("panels");n.length===0&&(e.trigger||e.nav)&&(n=t.find(e.trigger||e.nav+" > *")),r.length===0&&(e.panel||e.content)&&(r=t.find(e.panel||e.content+" > *")),this.set("triggers",n),this.set("panels",r)},_initElement:function(){this.element.addClass(s.UI_SWITCHABLE)},_initPanels:function(){var e=this.panels=this.get("panels");if(e.length===0)throw new Error("panels.length is ZERO");this.content=e.parent().addClass(s.CONTENT_CLASS),e.addClass(s.PANEL_CLASS)},_initTriggers:function(){var e=this.triggers=this.get("triggers");e.length===0&&this.get("hasTriggers")?(this.nav=c(this.get("length"),this.get("activeIndex")).appendTo(this.element),this.triggers=this.nav.children()):this.nav=e.parent(),this.triggers.addClass(s.TRIGGER_CLASS),this.nav.addClass(s.NAV_CLASS),this.triggers.each(function(e,t){r(t).data("value",e)}),this._bindTriggers()},_initPlugins:function(){this._plugins=[],this._plug(o),this._plug(u),this._plug(a),this._plug(f)},_bindTriggers:function(){function t(t){e._onFocusTrigger(t.type,r(this).data("value"))}var e=this;this.get("triggerType")==="click"&&this.triggers.click(t)},_onFocusTrigger:function(e,t){var n=this;e==="click"&&this.switchTo(t)},switchTo:function(e){return this.set("activeIndex",e),this},_onRenderActiveIndex:function(e,t){this._triggerIsValid(e,t)&&this._switchTo(e,t)},_switchTo:function(e,t){this.trigger("switch",e,t),this._switchTrigger(e,t),this._switchPanel(this._getPanelInfo(e,t)),this.trigger("switched",e,t)},_triggerIsValid:function(e,t){return e!==t},_switchTrigger:function(e,t){var n=this.triggers;if(n.length<1)return;n.eq(t).removeClass(s.ACTIVE_CLASS),n.eq(e).addClass(s.ACTIVE_CLASS)},_switchPanel:function(e){e.fromPanels.css("display","none"),e.toPanels.css("display","block")},_getPanelInfo:function(e,t){var n=this.panels.get(),i=this.get("step"),s,o;if(t>-1){var u=t*i,a=(t+1)*i;s=n.slice(u,a)}return o=n.slice(e*i,(e+1)*i),{toIndex:e,fromIndex:t,toPanels:r(o),fromPanels:r(s)}},prev:function(){var e=this.get("activeIndex"),t=(e-1+this.get("length"))%this.get("length");this.switchTo(t)},next:function(){var e=this.get("activeIndex"),t=(e+1)%this.get("length");this.switchTo(t)},_plug:function(e){if(!e.isNeeded.call(this))return;var t=e.attrs,n=e.methods;if(t)for(var r in t)t.hasOwnProperty(r)&&!(r in this.attrs)&&this.set(r,t[r]);if(n)for(var i in n)n.hasOwnProperty(i)&&(this[i]=n[i]);e.install&&e.install.call(this),this._plugins.push(e)},destroy:function(){r.each(this._plugins,function(e,t){t.destroy&&t.destroy.call(this)}),l.superclass.destroy.call(this)}});n.exports=l});