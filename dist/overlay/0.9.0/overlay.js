define("#overlay/0.9.0/overlay",["$","position","android-shim","widget"],function(a,b,c){function i(a,b){return a.contains?a!=b&&a.contains(b):!!(a.compareDocumentPosition(b)&16)}function j(a){return i(document.documentElement,a)}var d=a("$"),e=a("position"),f=a("android-shim"),g=a("widget"),h=g.extend({attrs:{width:"",height:"",zIndex:99,visible:!1,align:{selfXY:[0,0],baseElement:e.VIEWPORT,baseXY:[0,0]},parentNode:document.body},render:function(){return h.superclass.render.call(this),this._setPosition(),this.bindUI(),this},bindUI:function(){var a=this.element.find('*[data-overlay-role="trigger"]'),b=this;return Array.prototype.slice.call(a),a.forEach(function(a){var c=a;if(c&&(action=d(c).attr("data-overlay-action")))switch(action){case"hide":d(c).unbind("click.overlay").bind("click.overlay",d.proxy(function(a){a.preventDefault(),this.hide()},b));break;case"destroy":d(c).unbind("click.overlay").bind("click.overlay",d.proxy(function(a){a.preventDefault(),this.destroy()},b))}}),this},destroy:function(){this.element.remove(),h.superclass.destroy.call(this)},show:function(){return this.rendered||this.render(),this.set("visible",!0),this},hide:function(){return this.set("visible",!1),this},setup:function(){this._setupShim()},_setPosition:function(a){if(!j(this.element[0]))return;a||(a=this.get("align"));var b=this.element.css("display")==="none";return b&&this.element.css({visibility:"hidden",display:"block"}),e.pin({element:this.element,x:a.selfXY[0],y:a.selfXY[1]},{element:a.baseElement,x:a.baseXY[0],y:a.baseXY[1]}),b&&this.element.css({visibility:"",display:"none"}),this},_setupShim:function(){var a=new f(this.element);this.after("show hide",a.sync,a),this.before("destroy",a.destroy,a);var b=h.prototype.attrs;for(var c in b)if(b.hasOwnProperty(c)){if(c==="parentNode")continue;this.on("change:"+c,a.sync,a)}},_onRenderWidth:function(a){this.element.css("width",a)},_onRenderHeight:function(a){this.element.css("height",a)},_onRenderZIndex:function(a){this.element.css("zIndex",a)},_onRenderAlign:function(a){this._setPosition(a)},_onRenderVisible:function(a){this.element[a?"show":"hide"]()}});c.exports=h});