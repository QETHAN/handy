function outerSize(a){function f(a){return a.split(" ")}function g(a){var b=[];return f(a).forEach(function(a){b.push(a.replace(/(\d*)([\w|\s]*)$/,function(a,b){return b}))}),b}function h(a){function g(){for(var b=0;b<arguments.length;b++)a.push(arguments[b])}var b=a.length,c={};switch(b){case 1:var d=a[0];g(d,d,d);break;case 2:var e=a[0],f=a[1];g(e,f);break;case 3:var e=a[0],f=a[1];g(f)}return a=a.map(function(a){return a*1}),c.top=a[0],c.right=a[1],c.bottom=a[2],c.left=a[3],c}var b=getComputedStyle(a),c=b.margin,d=b.padding,e=b["border-width"];return{borderWidth:h(g(e)),padding:h(g(d)),margin:h(g(c))}}define("#overlay/0.9.0/overlay",["base","$"],function(a,b,c){var d=a("base"),e=a("$"),f=d.extend({attrs:{element:null,parent:e("body"),styles:{zIndex:9999,display:"none"}},initialize:function(a){f.superclass.initialize.call(this,a),this.shim=null},render:function(){return this.get("element")&&!e(this.get("element")).parent().get(0)&&this.set("element",e(this.get("element")).hide()),this.set("element",e(this.get("element")).appendTo(this.get("parent"))).setStyles(this.get("styles")).bindUI(),this},bindUI:function(){var a=this.get("element").find('*[data-overlay-role="trigger"]'),b=this;return Array.prototype.slice.call(a),a.forEach(function(a){if(a&&(action=e(a).attr("data-overlay-action")))switch(action){case"hide":e(a).unbind("click.overlay").bind("click.overlay",e.proxy(function(a){a.preventDefault(),this.hide()},b));break;case"destroy":e(a).unbind("click.overlay").bind("click.overlay",e.proxy(function(a){a.preventDefault(),this.destroy()},b))}}),this},destroy:function(){this.get("element")[0]&&this.get("element").remove(),this.shim&&this.shim.remove(),this.set("element",null),this.shim=null,this.set("parent",e("body")).set("styles",{zIndex:9999})},show:function(){var a="",b=this.get("element");return b.css("display")==="block"?a="block":b.css("display")==="-webkit-box"&&(a="-webkit-box"),b.css({display:a}),this.addShim().trigger("shown",this),this},hide:function(){return this.get("element").hide(),this.trigger("hide",this),this.shim&&this.shim.remove(),this.shim=null,this},setStyles:function(a){this.get("element").css(a);if(this.shim){var b=this.get("element"),c=outerSize(b[0]);this.shim.css({width:parseInt(b.css("width"),10)+c.borderWidth.left+c.borderWidth.right+c.padding.left+c.padding.right,height:parseInt(b.css("height"),10)+c.borderWidth.top+c.borderWidth.bottom+c.padding.top+c.padding.bottom,left:parseInt(b.css("left"),10),top:parseInt(b.css("top"),10)+window.scrollY})}return this},addShim:function(){if(this.shim)return this;var a=this.get("element"),b=a.offset(),c=parseInt(a.css("zIndex"),10)-1||1,d=e('<div data-overlay-role="shim" style="position:absolute;margin:0;padding:0;border:none;background:rgba(255,255,255,0.01);-webkit-tap-highlight-color:rgba(0,0,0,0);width:'+b.width+"px;"+"height:"+b.height+"px;"+"top:"+b.top+"px;"+"left:"+b.left+"px;"+"z-index:"+c+';"></div>');return this.shim=d.appendTo(a.parent()),this}});c.exports=f});