define("#overlay/0.9.1/overlay",["#zepto/0.9.0/zepto","#position/0.9.0/position","#android-shim/0.9.0/android-shim","#widget/0.9.16/widget-mobile","#base/0.9.16/base","#class/0.9.2/class","#events/0.9.1/events","#base/0.9.16/aspect","#base/0.9.16/attribute","#widget/0.9.16/daparser-mobile","#widget/0.9.16/auto-render-mobile"],function(e,t,n){function a(e,t){return e.contains?e!=t&&e.contains(t):!!(e.compareDocumentPosition(t)&16)}function f(e){return a(document.documentElement,e)}var r=e("#zepto/0.9.0/zepto"),i=e("#position/0.9.0/position"),s=e("#android-shim/0.9.0/android-shim"),o=e("#widget/0.9.16/widget-mobile"),u=o.extend({attrs:{width:"",height:"",zIndex:99,visible:!1,align:{selfXY:[0,0],baseElement:i.VIEWPORT,baseXY:[0,0]},parentNode:document.body},render:function(){return u.superclass.render.call(this),this._setPosition(),this},delegateEvents:function(){u.superclass.delegateEvents.call(this);var e=this.element.find('*[data-overlay-role="trigger"]'),t=this;return Array.prototype.slice.call(e),e.forEach(function(e){var n=e;if(n&&(action=r(n).attr("data-overlay-action")))switch(action){case"hide":r(n).unbind("click.overlay").bind("click.overlay",r.proxy(function(e){e.preventDefault(),this.hide()},t));break;case"destroy":r(n).unbind("click.overlay").bind("click.overlay",r.proxy(function(e){e.preventDefault(),this.destroy()},t))}}),this},destroy:function(){this.element.remove(),u.superclass.destroy.call(this)},show:function(){return this.rendered||this.render(),this.set("visible",!0),this},hide:function(){return this.set("visible",!1),this},setup:function(){this._setupShim()},_setPosition:function(e){if(!f(this.element[0]))return;e||(e=this.get("align"));var t=this.element.css("display")==="none";return t&&this.element.css({visibility:"hidden",display:"block"}),i.pin({element:this.element,x:e.selfXY[0],y:e.selfXY[1]},{element:e.baseElement,x:e.baseXY[0],y:e.baseXY[1]}),t&&this.element.css({visibility:"",display:"none"}),this},_setupShim:function(){var e=new s(this.element);this.after("show hide",e.sync,e),this.before("destroy",e.destroy,e);var t=u.prototype.attrs;for(var n in t)if(t.hasOwnProperty(n)){if(n==="parentNode")continue;this.on("change:"+n,e.sync,e)}},_onRenderWidth:function(e){this.element.css("width",e)},_onRenderHeight:function(e){this.element.css("height",e)},_onRenderZIndex:function(e){this.element.css("zIndex",e)},_onRenderAlign:function(e){this._setPosition(e)},_onRenderVisible:function(e){this.element[e?"show":"hide"]()}});n.exports=u});