<!DOCTYPE HTML>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=0;"/>
        <meta name="apple-mobile-web-app-capable" content="yes"/>
        <meta name="apple-mobile-web-app-status-bar-style" content="black"/>
        <meta name="format-detection" content="telephone=no"/>
        <meta name="format-detection" content="email=no"/>
        <title>parser</title>
        <script type="text/javascript">
            var debug = "False";
        </script>
        
        
        <link rel="stylesheet" href="/handy/docs/assets/base.css" />
        <link rel="stylesheet" href="/handy/docs/assets/style.css" />
        <link rel="stylesheet" href="/handy/docs/assets/pygments.css" />
        <script src="/handy/tools/seajs-and-its-friends.js"></script>
        
        <!--[if lt IE 9]>
        <script type="text/javascript" src="/docs/assets/html5shiv.js"></script>
        <![endif]-->
    </head>
    <body>
        <header id="header">
            <h1 id="brand"><a href="/handy">Handy</a></h1>
            <nav id="nav" role="navigation">
                <a href="/handy/docs/parser/">Parser</a>
                
                <a href="/handy/docs/parser/examples/">Examples</a>
                
                
                <a id="nav-test" href="/handy/lib/parser/tests/runner.html">Test</a>
                
            </nav>
        </header>

        <div id="main">
            


            
            <div class="container">
                <p><style type="text/css">
        a{
            text-decoration:none;
        }
        .box {
            width: auto;
            margin: 0 auto;
            padding: 0;
        }</p>

<pre><code>caption {
        text-align: left;
    }

    td {
        text-align: left;
    }

    table {
        margin: 10px 0;
    }

    table td:first-child {
        width: 100px;
    }
    .des{
        background:#F0F1F8;
        border:1px solid #D4D8EB;
        padding:10px;
        line-height:22px;
    }
    pre,code{
        padding:10px;
        background:#FCFBFA;
        border:1px solid #EFEEED;
        border-left-width:5px;
    }
    .bar{
        height:40px;
        background:black;
        color:#fff;
        text-align:center;
        margin:0 0 20px 0;
        font-size:14px;
        line-height:40px;
    }
    body{
        padding:0;
        margin:0;
    }
    .des{
        margin:0 30px;
    }
    .back{
        font-size:14px;
    }
    #J-bottom-btns{
        margin-top:50px;
        text-align:center;
    }
    #J-bottom-btns a{
        color:#fff;
        text-align:center;
        display:block;
        margin-bottom:10px;
        background:#000;
        padding:5px;
    }
    #J-performance-show{
        position:absolute;
        top:0;
        right:0;
        z-index:10;
        background:green;
        color:#fff;
        line-height:23px;
        padding:10px;
        border:1px solid #000;
    }</code></pre>
<p></style>
<div class="box">
    <div id="J-page-box" data-module-name="pageTransition" data-pageTransition-id="abcd">
        <section data-pageTransition-role="page">
            <h1 class="bar">Example：PageTransition</h1>
            <p class="des" style="border-bottom:none;">PageTransition 提供一个模拟 iOS 原生应用页面过渡效果的 UI 组件。</p>
            <article class="des">
                PageTransition 暂时只提供水平过渡效果，未来的版本会增加过渡模式 (transition mode) 配置<br />
                PageTransition 水平过渡效果使用了 margin-left 动画，并没有使用 translate-x ，由此带来的问题是：<a href="http://qiqicartoon.com/?p=1023" target="_blank">动画运动不够平滑</a>,
                既然 margin-left 在移动平台的动画不够平滑，为何还要使用 margin-left 呢？您可以参考 <a href="http://qiqicartoon.com/?p=785" target="_blank">Android平台中CSS3 transition和animation问题</a><br />
                1、您可以<a href="javascript:void(0)" data-pageTransition-role="trigger" data-pageTransition-action="forward" data-pageTransition-forward="#J-page-box-nextPage">点击此</a>查看 PageTransition 组件所需的 HTML 结构<br />
                2、您可以<a href="javascript:void(0)" data-pageTransition-role="trigger" data-pageTransition-action="forward" data-pageTransition-forward="#J-page-box-nextPage2">查看 pageTransition 组件的基本配置</a><br />
                建议您使用移动设备内置浏览器访问这个页面<br />
                <a href="javascript:void(0)" data-pageTransition-role="trigger" data-pageTransition-action="forward" data-pageTransition-forward="#J-page-box-nextPage">下一页</a>
            </article>
        </section>
    </div>
    <p style="margin:10px 30px;text-align:center;">@copy <a href="http://aralejs.org" target="_blank">arale.org</a></p></p>
<p><article id="J-page-box-nextPage" style="display:none;" data-pageTransition-role="page">
    <h1 class="bar">Example: PageTransition 所需的 HTML 结构</h1>
    <article class="des">
        <a href="javascript:void(0)" data-pageTransition-role="trigger" data-pageTransition-action="back" class="back">返回</a><br />
 <pre>
 &lt;div id=&quot;J-page-box&quot;&gt;这是最外层的容器
     &lt;section data-pageTransition-role=&quot;page&quot;&gt;标识这个标签是 pageTransition 的页面
         &lt;a href=&quot;javascript:void(0)&quot; data-pageTransition-role=&quot;trigger&quot; data-pageTransition-action=&quot;forward&quot; data-pageTransition-forward=&quot;#J-page-box-nextPage&quot;&gt;点击此&lt;/a&gt;
         这是超链接是一个触点，它必须有 action，forward 和 role 配置，这是 pageTransition 组件的触点最基本的参数
     &lt;/section&gt;
 &lt;/div&gt;
 </pre>
     </article>
</article></p>
<p><article id="J-page-box-nextPage2" style="display:none;" data-pageTransition-role="page">
        <h1 class="bar">Example: PageTransition 的基本配置参数</h1>
        <article class="des">
            <a href="javascript:void(0)" data-pageTransition-role="trigger" data-pageTransition-action="back" class="back">返回</a><br />
            <a href="javascript:void(0)" data-pageTransition-role="trigger" data-pageTransition-action="forward" data-pageTransition-forward="#J-page-box-nextPage">点击此</a>查看 PageTransition 组件所需的 HTML 结构<br />
            <a href="javascript:void(0)" id="J-destroy">点击此处销毁 pageTransition </a><br />
<pre>
实例化配置参数：
{
  srcNode:
}
pageTransition 还需要trigger及page参数，这些参数是通过 data-pageTransition-attribute 定义在 html 标签上的
trigger:
  当在 html 中定义一个 PageTransition trigger 时，必须定义它的 action,role 和 forward/back 指向的目标元素，这些定义必须以 data-pageTransition 做前缀
  &lt;a href=&quot;javascript:void(0)&quot; data-pageTransition-role=&quot;trigger&quot; data-pageTransition-action=&quot;forward&quot; data-pageTransition-forward=&quot;#J-page-box-nextPage&quot;&gt;点击此&lt;/a&gt;
  如果你的触发器的作用是返回，则不需要指定返回的目标元素，PageTransition 会记录你上一张页面。</p>
<p>page:
  PageTransition 只需要一个 page 即可，它同样以 data-pageTransition 做前缀，以 role 做名称
  data-pageTransition-role=&quot;page&quot;
  值得注意的是：凡是要做为 trigger 的 data-pageTransition-forward 属性值的目标元素，必须要定义 data-pageTransition-role=&quot;page&quot;。
</pre>
        </article>
</article>
<div data-module-name="overlay" data-overlay-id="one">
    <data data-overlay-align='{"baseXY":["100%","100%"],"selfXY":["100%+30","100%"]}'></data>
    <a href="javascript:void(0)" data-overlay-role="trigger" data-overlay-action="hide">关闭</a>
    <a href="javascript:void(0)" data-overlay-role="trigger" data-overlay-action="destroy">销毁</a>
</div>
<div data-module-name="overlay" data-overlay-id="two">
    <data data-overlay-align='{"baseXY":["center","center"],"selfXY":["center","center"]}'></data>
    <a href="javascript:void(0)" data-overlay-role="trigger" data-overlay-action="hide">取消</a>
</div>
<a href="javascript:void(0)" id="J-showOverlay" style="margin:0 30px;">右下角显示一个 Overlay </a>
<a href="javascript:void(0)" id="J-showOverlay2" style="margin:0 30px;">在中央显示一个 Overlay </a>
</div></p>

<div id="J-performance-show"></div>
<div class="highlight"><pre><span class="nx">seajs</span><span class="p">.</span><span class="nx">use</span><span class="p">([</span><span class="s1">&#39;parser&#39;</span><span class="p">,</span><span class="s1">&#39;$&#39;</span><span class="p">],</span><span class="kd">function</span> <span class="p">(</span><span class="nx">parser</span><span class="p">,</span><span class="nx">$</span><span class="p">){</span>
        <span class="kd">var</span> <span class="nx">completed</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(){</span>
            <span class="kd">var</span> <span class="nx">time</span> <span class="o">=</span> <span class="nx">HandyParserData</span><span class="p">.</span><span class="nx">time</span><span class="p">,</span>
                    <span class="nx">html</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>

            <span class="nx">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;p&gt;解析 DOM 的时间：&#39;</span><span class="o">+</span><span class="nx">time</span><span class="p">.</span><span class="nx">parseDOM</span><span class="o">/</span><span class="mi">1000</span><span class="o">+</span><span class="s1">&#39;ms&lt;/p&gt;&#39;</span><span class="p">;</span>
            <span class="nx">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;p&gt;分析数据的时间：&#39;</span><span class="o">+</span><span class="nx">time</span><span class="p">.</span><span class="nx">analyzeData</span><span class="o">/</span><span class="mi">1000</span><span class="o">+</span><span class="s1">&#39;ms&lt;/p&gt;&#39;</span><span class="p">;</span>
            <span class="nx">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;p&gt;解析器总共消耗的时间：&#39;</span><span class="o">+</span><span class="nx">time</span><span class="p">.</span><span class="nx">parse</span><span class="o">/</span><span class="mi">1000</span><span class="o">+</span><span class="s1">&#39;ms&lt;/p&gt;&#39;</span><span class="p">;</span>

            <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s1">&#39;#J-performance-show&#39;</span><span class="p">).</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="nx">html</span><span class="p">;</span>

            <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s1">&#39;#J-showOverlay&#39;</span><span class="p">).</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;click&#39;</span><span class="p">,</span><span class="kd">function</span> <span class="p">(){</span>
                <span class="nx">HandyParserData</span><span class="p">.</span><span class="nx">overlay_one</span><span class="p">.</span><span class="nx">show</span><span class="p">();</span>
            <span class="p">},</span><span class="kc">false</span><span class="p">);</span>

            <span class="nx">HandyParserData</span><span class="p">.</span><span class="nx">overlay_two</span><span class="p">.</span><span class="nx">after</span><span class="p">(</span><span class="s1">&#39;show&#39;</span><span class="p">,</span><span class="kd">function</span> <span class="p">(</span><span class="nx">o</span><span class="p">){</span>
                <span class="nx">o</span><span class="p">.</span><span class="nx">element</span><span class="p">.</span><span class="nx">css</span><span class="p">({</span>
                    <span class="nx">left</span><span class="o">:</span> <span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="nb">window</span><span class="p">).</span><span class="nx">width</span><span class="p">()</span> <span class="o">-</span> <span class="nx">o</span><span class="p">.</span><span class="nx">element</span><span class="p">.</span><span class="nx">offset</span><span class="p">().</span><span class="nx">width</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span>
                    <span class="nx">top</span><span class="o">:</span>  <span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="nb">window</span><span class="p">).</span><span class="nx">height</span><span class="p">()</span> <span class="o">-</span> <span class="nx">o</span><span class="p">.</span><span class="nx">element</span><span class="p">.</span><span class="nx">offset</span><span class="p">().</span><span class="nx">height</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">+</span> <span class="nb">window</span><span class="p">.</span><span class="nx">scrollY</span>
                <span class="p">});</span>
            <span class="p">});</span>
            <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s1">&#39;#J-showOverlay2&#39;</span><span class="p">).</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;click&#39;</span><span class="p">,</span><span class="kd">function</span> <span class="p">(){</span>
                <span class="nx">HandyParserData</span><span class="p">.</span><span class="nx">overlay_two</span><span class="p">.</span><span class="nx">show</span><span class="p">();</span>
            <span class="p">},</span><span class="kc">false</span><span class="p">);</span>
        <span class="p">};</span>
        <span class="nx">HandyParser</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;completed&#39;</span><span class="p">,</span><span class="kd">function</span> <span class="p">(){</span>
            <span class="nx">completed</span><span class="p">();</span>
        <span class="p">});</span>
        <span class="nx">HandyParser</span><span class="p">.</span><span class="nx">start</span><span class="p">();</span>
    <span class="p">});</span>
</pre></div>

<script type="text/javascript">
    seajs.use(['parser','$'],function (parser,$){
        var completed = function (){
            var time = HandyParserData.time,
                    html = '';

            html += '<p>解析 DOM 的时间：'+time.parseDOM/1000+'ms</p>';
            html += '<p>分析数据的时间：'+time.analyzeData/1000+'ms</p>';
            html += '<p>解析器总共消耗的时间：'+time.parse/1000+'ms</p>';

            document.querySelector('#J-performance-show').innerHTML = html;

            document.querySelector('#J-showOverlay').addEventListener('click',function (){
                HandyParserData.overlay_one.show();
            },false);

            HandyParserData.overlay_two.after('show',function (o){
                o.element.css({
                    left: ($(window).width() - o.element.offset().width) / 2,
                    top:  ($(window).height() - o.element.offset().height) / 2 + window.scrollY
                });
            });
            document.querySelector('#J-showOverlay2').addEventListener('click',function (){
                HandyParserData.overlay_two.show();
            },false);
        };
        HandyParser.on('completed',function (){
            completed();
        });
        HandyParser.start();
    });
</script>

            </div>
            
        </div>
        <hr class="end" />
        <script type="text/javascript">
            seajs.use('$', function($) {
                $('#nav-test').click(function() {
                    var href = $(this).attr('href');
                    var iframe = '<div class="container"><iframe src="' +
                        href + '" frameborder="0" width="100%" height="640">' +
                        '</iframe></div>';
                    $('#main').html(iframe);
                    !!history.pushState && history.pushState(null, 'Test', href);
                    return false;
                });
            });
        </script>
    </body>
</html>